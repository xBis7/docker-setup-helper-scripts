CORE-SITE.XML_fs.defaultFS=hdfs://namenode:8020

# After enabling trino impersonation, trino communicates with HDFS
# either as 'trino' proxy user or 'hive' proxy user.
# With these properties we are allowing the proxy users to authenticate with HDFS.
CORE-SITE.XML_hadoop.proxyuser.trino.hosts=*
CORE-SITE.XML_hadoop.proxyuser.trino.groups=*
CORE-SITE.XML_hadoop.proxyuser.hive.hosts=*
CORE-SITE.XML_hadoop.proxyuser.hive.groups=*

CORE-SITE.XML_hadoop.security.key.provider.path=kms://http@ranger-kms:9292/kms
# CORE-SITE.XML_hadoop.security.key.provider.path=http://ranger-kms:9292/kms

HDFS-SITE.XML_dfs.namenode.rpc-address=namenode:8020
HDFS-SITE.XML_dfs.replication=1

HDFS-SITE.XML_dfs.encryption.key.provider.uri=kms://http@ranger-kms:9292/kms
# HDFS_SITE.XML_hadoop.kms.security.authorization.manager=org.apache.ranger.authorization.kms.authorizer.RangerKmsAuthorizer
HDFS_SITE.XML_dfs.encryption.key.provider.authority=kms://http@ranger-kms:9292/kms
HDFS_SITE.XML_dfs.encryption.key.provider.classname=org.apache.hadoop.crypto.key.kms.RangerKmsAuthorizer
# HDFS-SITE.XML_dfs.encryption.key.provider.uri=http://ranger-kms:9292/kms
HDFS_SITE.XML_dfs.client.ignore.namenode.default.kms.uri=true

# Security - Ranger
HDFS-SITE.XML_dfs.permissions.enabled=true
HDFS-SITE.XML_dfs.namenode.acls.enabled=true
HDFS-SITE.XML_dfs.permissions.ContentSummary.subAccess=true
HDFS-SITE.XML_dfs.namenode.inode.attributes.provider.class=org.apache.ranger.authorization.hadoop.RangerHdfsAuthorizer

KMS_SITE.XML_hadoop.kms.audit.aggregation.window.ms=10000
KMS_SITE.XML_hadoop.kms.authentication.signer.secret.provider=zookeeper
KMS_SITE.XML_hadoop.kms.authentication.signer.secret.provider.zookeeper.auth.type=sasl
KMS_SITE.XML_hadoop.kms.authentication.signer.secret.provider.zookeeper.path=/hadoop-kms/hadoop-auth-signature-secret
KMS_SITE.XML_hadoop.kms.authentication.type=simple
KMS_SITE.XML_hadoop.kms.cache.enable=false
# KMS_SITE.XML_hadoop.kms.cache.enable=true
# KMS_SITE.XML_hadoop.kms.cache.timeout.ms=600000
# KMS_SITE.XML_hadoop.kms.current.key.cache.timeout.ms=30000
KMS_SITE.XML_hadoop.kms.proxyuser.HTTP.groups='*'
KMS_SITE.XML_hadoop.kms.proxyuser.HTTP.hosts='*'
KMS_SITE.XML_hadoop.kms.proxyuser.hdfs.groups='*'
KMS_SITE.XML_hadoop.kms.proxyuser.hdfs.hosts='*'
KMS_SITE.XML_hadoop.kms.proxyuser.hive.groups='*'
KMS_SITE.XML_hadoop.kms.proxyuser.hive.hosts='*'
KMS_SITE.XML_hadoop.kms.proxyuser.ranger.groups='*'
KMS_SITE.XML_hadoop.kms.proxyuser.ranger.hosts='*'
KMS_SITE.XML_hadoop.kms.key.provider.uri=kms://http@ranger-kms:9292/kms
KMS_SITE.XML_hadoop.kms.security.authorization.manager=org.apache.ranger.authorization.kms.authorizer.RangerKmsAuthorizer

# KMS_SITE.XML_hadoop.kms.authentication.signer.secret.provider.zookeeper.connection.string="{{ ranger_kms.zookeeper_connect_string }}"

# KMS_SITE.XML_ranger.keystore.file.type=jks
# KMS_SITE.XML_ranger.truststore.file.type=jks

# KMS_SITE.XML_hadoop.kms.authentication.zk-dt-secret-manager.enable=true
# KMS_SITE.XML_hadoop.kms.authentication.zk-dt-secret-manager.zkConnectionString="{{ ranger_kms.zookeeper_connect_string }}"
# KMS_SITE.XML_hadoop.kms.authentication.zk-dt-secret-manager.znodeWorkingPath=hadoop-kms-dt
# KMS_SITE.XML_hadoop.kms.authentication.zk-dt-secret-manager.zkAuthType=sasl

# KMS_SITE.XML_ranger.accesslog.rotate.max.days=5

MAPRED-SITE.XML_mapreduce.framework.name=yarn
MAPRED-SITE.XML_yarn.app.mapreduce.am.env=HADOOP_MAPRED_HOME=$HADOOP_HOME
MAPRED-SITE.XML_mapreduce.map.env=HADOOP_MAPRED_HOME=$HADOOP_HOME
MAPRED-SITE.XML_mapreduce.reduce.env=HADOOP_MAPRED_HOME=$HADOOP_HOME

YARN-SITE.XML_yarn.resourcemanager.hostname=resourcemanager
YARN-SITE.XML_yarn.nodemanager.pmem-check-enabled=false
YARN-SITE.XML_yarn.nodemanager.delete.debug-delay-sec=600
YARN-SITE.XML_yarn.nodemanager.vmem-check-enabled=false
YARN-SITE.XML_yarn.nodemanager.aux-services=mapreduce_shuffle

CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.maximum-applications=10000
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.maximum-am-resource-percent=0.1
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.resource-calculator=org.apache.hadoop.yarn.util.resource.DefaultResourceCalculator
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.root.queues=default
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.root.default.capacity=100
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.root.default.user-limit-factor=1
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.root.default.maximum-capacity=100
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.root.default.state=RUNNING
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.root.default.acl_submit_applications=*
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.root.default.acl_administer_queue=*
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.node-locality-delay=40
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.queue-mappings=
CAPACITY-SCHEDULER.XML_yarn.scheduler.capacity.queue-mappings-override.enable=false

LOG4J.PROPERTIES_log4j.rootLogger=INFO, stdout
LOG4J.PROPERTIES_log4j.appender.stdout=org.apache.log4j.ConsoleAppender
LOG4J.PROPERTIES_log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
LOG4J.PROPERTIES_log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n
